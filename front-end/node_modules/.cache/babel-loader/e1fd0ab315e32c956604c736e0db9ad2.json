{"ast":null,"code":"var _jsxFileName = \"/Users/wongweijie/Citi-Hackathon/citi-ezVerify/front-end/src/RequestPage/Request.js\";\nimport React from 'react';\nimport \"./RequestStyle.css\";\nimport { useHistory } from 'react-router-dom';\n\nfunction Request() {\n  const [payee, setPayee] = React.useState(\"\");\n  const [amount, setAmount] = React.useState(\"\");\n  const [cardNumber, setCardNumber] = React.useState(\"\");\n  const number = \"+6582668696\";\n  const history = useHistory();\n\n  const handleSubmit = event => {\n    console.log(`\n      Payee: ${payee}\n      Amount: ${amount}\n      Card Number: ${cardNumber}\n    `);\n    event.preventDefault();\n  };\n\n  const postTransaction = () => {\n    // POST request using fetch() \n    fetch('/transactions/add_transaction', {\n      // Adding method type \n      method: \"POST\",\n      // Adding body or contents to send \n      body: JSON.stringify({\n        payee: payee,\n        amount: amount,\n        card_number: cardNumber\n      }),\n      // Adding headers to the request \n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }\n    }) // Converting to JSON \n    .then(response => response.json()).then(response => {\n      let transaction_id = response.data;\n      let url = \"http://localhost:3000/auth/\" + transaction_id;\n      console.log(url);\n      sendSMS(url, number);\n      history.push('/requestsuccess');\n    });\n  };\n\n  const sendSMS = (url, number) => {\n    // POST request using fetch() \n    fetch('/sms_otp/messages', {\n      // Adding method type \n      method: \"POST\",\n      // Adding body or contents to send \n      body: JSON.stringify({\n        to: number,\n        body: url\n      }),\n      // Adding headers to the request \n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    }) // Converting to JSON \n    .then(response => response.json());\n  }; // const axios = require('axios')\n  // async function sendSMS(authUrl,phoneNumber) {\n  //   console.log(\"authUrl\", authUrl);\n  //   console.log(\"phoneNumber\", phoneNumber);\n  //   // const config = {\n  //   //     'Content-Type': 'application/x-www-form-urlencoded'\n  //   // }\n  //   // const requestBody = {\n  //   //   Body: authUrl,\n  //   //   To: phoneNumber,\n  //   //   From: '+14439513301'\n  //   // }\n  //   // const url = 'https://AC4f84bd7bad460e74b645fed353c1b845:26aa330f9bed147f0213c89d8e5aea28@api.twilio.com/2010-04-01/Accounts/AC4f84bd7bad460e74b645fed353c1b845/Messages'\n  //   // console.log(\"qs :\", querystring.stringify(requestBody))\n  //   // axios({method: 'post', url:url, data:querystring.stringify(requestBody), headers:config })\n  //   //   .then(res => {\n  //   //     console.log(`statusCode: ${res.statusCode}`)\n  //   //     console.log(res)\n  //   //   })\n  //   //   .catch(error => {\n  //   //     console.error(error)\n  //   //   })\n  //   // Twilio Credentials\n  //   const accountSid = 'AC4f84bd7bad460e74b645fed353c1b845';\n  //   const authToken = '26aa330f9bed147f0213c89d8e5aea28';\n  //   // require the Twilio module and create a REST client\n  //   const client = require('twilio')(accountSid, authToken);\n  //   client.messages\n  //     .create({\n  //       to: phoneNumber,\n  //       from: '+14439513301',\n  //       body: authUrl,\n  //     })\n  // }\n\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, \"Payment Request\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, \"Payee:\", /*#__PURE__*/React.createElement(\"input\", {\n    name: \"payee\",\n    type: \"payee\",\n    value: payee,\n    onChange: e => setPayee(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, \"Amount ($):\", /*#__PURE__*/React.createElement(\"input\", {\n    name: \"amount\",\n    type: \"amount\",\n    value: amount,\n    onChange: e => setAmount(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, \"Card Number:\", /*#__PURE__*/React.createElement(\"input\", {\n    name: \"cardNumber\",\n    type: \"cardNumber\",\n    value: cardNumber,\n    onChange: e => setCardNumber(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: postTransaction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, \"Pay\"));\n}\n\nexport default Request;","map":{"version":3,"sources":["/Users/wongweijie/Citi-Hackathon/citi-ezVerify/front-end/src/RequestPage/Request.js"],"names":["React","useHistory","Request","payee","setPayee","useState","amount","setAmount","cardNumber","setCardNumber","number","history","handleSubmit","event","console","log","preventDefault","postTransaction","fetch","method","body","JSON","stringify","card_number","headers","then","response","json","transaction_id","data","url","sendSMS","push","to","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"./RequestStyle.css\"\nimport { useHistory } from 'react-router-dom'\n\n\nfunction Request() {\n  const [payee, setPayee] = React.useState(\"\");\n  const [amount, setAmount] = React.useState(\"\");\n  const [cardNumber, setCardNumber] = React.useState(\"\");\n  const number = \"+6582668696\";\n  const history = useHistory();\n  \n\n\n  const handleSubmit = (event) => {\n    console.log(`\n      Payee: ${payee}\n      Amount: ${amount}\n      Card Number: ${cardNumber}\n    `);\n\n    event.preventDefault();\n  }\n\n  const postTransaction = () => {\n    // POST request using fetch() \n    fetch('/transactions/add_transaction', { \n          \n      // Adding method type \n      method: \"POST\", \n        \n      // Adding body or contents to send \n      body: JSON.stringify({ \n          payee: payee, \n          amount: amount, \n          card_number: cardNumber \n      }),\n      // Adding headers to the request \n      headers: { \n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }    \n    }) \n    // Converting to JSON \n    .then(response => response.json()) \n    .then(response => {\n      let transaction_id = response.data;\n      let url = \"http://localhost:3000/auth/\"+transaction_id;\n      console.log(url)\n      sendSMS(url,number);\n      history.push('/requestsuccess')\n  }); \n\n  }\n\n  const sendSMS = (url,number) => {\n    // POST request using fetch() \n    fetch('/sms_otp/messages', { \n          \n      // Adding method type \n      method: \"POST\", \n        \n      // Adding body or contents to send \n      body: JSON.stringify({ \n          to: number,\n          body: url \n      }),\n      // Adding headers to the request \n      headers: { \n        \"Content-type\": \"application/json\"\n      }    \n    }) \n    // Converting to JSON \n    .then(response => response.json()) \n\n  }\n \n  \n  // const axios = require('axios')\n  // async function sendSMS(authUrl,phoneNumber) {\n  //   console.log(\"authUrl\", authUrl);\n  //   console.log(\"phoneNumber\", phoneNumber);\n  //   // const config = {\n  //   //     'Content-Type': 'application/x-www-form-urlencoded'\n  //   // }\n  //   // const requestBody = {\n  //   //   Body: authUrl,\n  //   //   To: phoneNumber,\n  //   //   From: '+14439513301'\n  //   // }\n  //   // const url = 'https://AC4f84bd7bad460e74b645fed353c1b845:26aa330f9bed147f0213c89d8e5aea28@api.twilio.com/2010-04-01/Accounts/AC4f84bd7bad460e74b645fed353c1b845/Messages'\n  //   // console.log(\"qs :\", querystring.stringify(requestBody))\n  //   // axios({method: 'post', url:url, data:querystring.stringify(requestBody), headers:config })\n  //   //   .then(res => {\n  //   //     console.log(`statusCode: ${res.statusCode}`)\n  //   //     console.log(res)\n  //   //   })\n  //   //   .catch(error => {\n  //   //     console.error(error)\n  //   //   })\n\n  //   // Twilio Credentials\n  //   const accountSid = 'AC4f84bd7bad460e74b645fed353c1b845';\n  //   const authToken = '26aa330f9bed147f0213c89d8e5aea28';\n\n  //   // require the Twilio module and create a REST client\n  //   const client = require('twilio')(accountSid, authToken);\n\n  //   client.messages\n  //     .create({\n  //       to: phoneNumber,\n  //       from: '+14439513301',\n  //       body: authUrl,\n  //     })\n  // }\n\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h1>Payment Request</h1>\n\n      <label>\n        Payee:\n        <input\n          name=\"payee\"\n          type=\"payee\"\n          value={payee}\n          onChange={e => setPayee(e.target.value)}\n          required />\n      </label>\n\n      <label>\n        Amount ($):\n        <input\n          name=\"amount\"\n          type=\"amount\"\n          value={amount}\n          onChange={e => setAmount(e.target.value)}\n          required />\n      </label>\n\n      <label>\n        Card Number:\n        <input\n          name=\"cardNumber\"\n          type=\"cardNumber\"\n          value={cardNumber}\n          onChange={e => setCardNumber(e.target.value)}\n          required />\n      </label>\n\n      <button onClick={postTransaction}>Pay</button>\n    </form>\n  );\n}\n\n  export default Request"]},"metadata":{},"sourceType":"module"}